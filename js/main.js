"use strict";window.onload=function(){function t(t,e){console.log("sending..",t,e),f.AddChild.sendTransaction(t,e,{from:web3.eth.accounts[0],gas:web3.getGas,to:r},function(t,e){t?console.log(t):console.log("Receiver has been set: "+e)})}function e(t,e,a,n){for(var s=0;s<t.length;s++){var i=t[s];i.onclick=function(t){t.preventDefault(),"toggle"===e&&i.classList.toggle("open"),"remove"===e&&i.classList.remove(a),"add"===e&&i.classList.add(a),n()}}}function a(t){document.getElementById(""+t).classList.add("active"),"Parent"==t&&n()}function n(){var t=3;k&&(document.getElementById("BuyGo").classList.add("hidden"),t--),g&&(document.getElementById("AddFirstChild").classList.add("hidden"),t--),h&&(document.getElementById("AddFirstTask").classList.add("hidden"),t--),t&&document.getElementById("QuickStartGuide").classList.add("active")}function s(){return"undefined"!=typeof web3&&new Promise(function(t,e){web3.eth.getAccounts(function(a,n){a?e(a):(n=n.length>1?n[0]:n,t(n))})})}function i(t){return new Promise(function(e,a){web3.eth.getBalance(t,function(t,n){t?a(t):e(n)})})}function u(){return new Promise(function(t,e){f.checkIfChild.call(function(a,n){a?e(a):t(n)})})}function l(t){var e="undefined"!=typeof t&&t>0?t:1;return new Promise(function(t,a){f.getActiveTaskIDs.call(e,function(e,n){e?a(e):t(n)})})}function p(){return new Promise(function(t,e){f.getAllChildren.call(function(a,n){a?e(a):t(n)})})}function o(){return w?new Promise(function(t,e){f.TaskTotalCount.call(w,function(a,n){a?e(a):t(n)})}):void s().then(function(t){w=t[0],this.checkForTaskCreated})}try{var y=(new Web3(web3.currentProvider||new Web3.providers.HttpProvider("https://testnet-rpc.gochain.io:443")),new Web3(new Web3.providers.HttpProvider("https://testnet-rpc.gochain.io:443"))),c=JSON.parse('[{"constant":true,"inputs":[],"name":"creator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_childaddr","type":"address"}],"name":"getChildByAddress","outputs":[{"name":"id","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_child","type":"address"}],"name":"getChildTaskStart","outputs":[{"name":"t","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getBalance","outputs":[{"name":"bal","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"disconnectFromParent","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_page","type":"uint256"}],"name":"getReviewableTaskIDs","outputs":[{"name":"s","type":"uint256[20]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalChildren","outputs":[{"name":"t","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"TaskTotalCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_childid","type":"uint256"}],"name":"CancelTask","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskStart","outputs":[{"name":"t","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Balance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_childaddr","type":"address"}],"name":"RejectReviewedTask","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"requestWalletChange","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_page","type":"uint256"}],"name":"getActiveTaskIDs","outputs":[{"name":"s","type":"uint256[20]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_child","type":"address"}],"name":"getChildTaskDescription","outputs":[{"name":"s","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_child","type":"address"}],"name":"getChildTaskInfo","outputs":[{"name":"_decayrate","type":"uint256"},{"name":"_desc","type":"string"},{"name":"_start","type":"uint256"},{"name":"_end","type":"uint256"},{"name":"_review","type":"bool"},{"name":"_active","type":"bool"},{"name":"_decay","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"kill","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_childid","type":"uint256"}],"name":"getChildById","outputs":[{"name":"c","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskIsActive","outputs":[{"name":"a","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskEndTime","outputs":[{"name":"x","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_page","type":"uint256"}],"name":"getCompletedTaskIDs","outputs":[{"name":"s","type":"uint256[20]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskIsReview","outputs":[{"name":"r","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_amount","type":"uint256"}],"name":"Withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"TotalChildren","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_childid","type":"uint256"}],"name":"CompleteTask","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint256"},{"name":"_newname","type":"string"}],"name":"setChildName","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_childid","type":"uint256"}],"name":"removeChildByID","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"Tasks","outputs":[{"name":"TaskID","type":"uint256"},{"name":"TaskStart","type":"uint256"},{"name":"TaskEnd","type":"uint256"},{"name":"TaskDesc","type":"string"},{"name":"TaskBounty","type":"uint256"},{"name":"TaskDecayRate","type":"uint256"},{"name":"TaskDecay","type":"bool"},{"name":"active","type":"bool"},{"name":"review","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_child","type":"address"}],"name":"removeChildByAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_child","type":"address"},{"name":"_page","type":"uint256"}],"name":"getActiveChildTaskIDs","outputs":[{"name":"s","type":"uint256[20]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_child","type":"address"}],"name":"getChildTaskIsReview","outputs":[{"name":"r","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_child","type":"address"}],"name":"getChildTaskIsDecay","outputs":[{"name":"s","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskDecayRate","outputs":[{"name":"d","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"withdrawAll","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Nickname","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Parent","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"child","type":"address"},{"name":"_nickname","type":"string"}],"name":"AddChild","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskIsDecay","outputs":[{"name":"s","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"child","type":"address"}],"name":"getChildTaskEndTime","outputs":[{"name":"x","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_user","type":"address"}],"name":"getBalanceOf","outputs":[{"name":"bal","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"uint256"}],"name":"ChildAddressByIndex","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_childId","type":"uint256"}],"name":"getParentsNicknameForChildByID","outputs":[{"name":"s","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_child","type":"address"}],"name":"getParent","outputs":[{"name":"p","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_ChildId","type":"uint256"},{"name":"child","type":"address"}],"name":"ChangeKidsAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getNickname","outputs":[{"name":"s","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"denyWalletChange","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"ParentChildNickname","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAllChildren","outputs":[{"name":"s","type":"address[20]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"ChildToIndex","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_child","type":"address"}],"name":"getChildTaskDecayRate","outputs":[{"name":"d","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_child","type":"address"}],"name":"isChildAccount","outputs":[{"name":"isKid","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_child","type":"address"}],"name":"getParentsNicknameForChildByAddress","outputs":[{"name":"s","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskInfo","outputs":[{"name":"","type":"uint256"},{"name":"","type":"string"},{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"bool"},{"name":"","type":"bool"},{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"}],"name":"getTaskDescription","outputs":[{"name":"s","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Children","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"Deposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_child","type":"address"}],"name":"getChildTaskIsActive","outputs":[{"name":"a","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"checkIfChild","outputs":[{"name":"t","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_taskid","type":"uint256"},{"name":"_parentid","type":"address"}],"name":"MarkTaskForReview","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_childAddress","type":"address"},{"name":"_taskdescription","type":"string"},{"name":"_tasklength","type":"uint256"},{"name":"_taskbounty","type":"uint256"},{"name":"_degrade","type":"bool"},{"name":"_decayrate","type":"uint256"}],"name":"AddTask","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"}]'),d=web3.eth.contract(c),m=y.eth.contract(c),r="0x1EEF95C215Ec588F8f9Ad654DCEfA1dd31EaE301",f=d.at(r),b=(m.at(r),"Child"),g=0,h=0;u().then(function(t){console.log("is child ?",t),0==t&&(b="Parent",g=0,p().then(function(t){var e=t.filter(function(t){return"0x"!==t});e.length>0&&(g=1),o().then(function(t){var e=t.toNumber();e>0&&(h=1),a(b)})}))}),l().then(function(t){console.log("here are your active tasks",t)})}catch(v){console.log("error loading web3.",v)}var w=0,k=0;"undefined"==typeof window.web3?console.error("Please use a web3 browser"):s().then(function(t){"undefined"==typeof t?console.log("no wallet."):(w=t[0],i(w).then(function(t){var e='<i class="fas fa-usd-circle"></i> '+web3.fromWei(t,"ether").toFixed(2)+" GO";y.fromWei(t,"ether").toFixed(2)>0&&(k=1),document.getElementById("GoBalance").innerHTML=e}))});var M=document.getElementsByClassName("test-metamask");e(M,"","",function(){metaMaskAuth()});var _=document.getElementsByClassName("cancelChild");e(_,"remove","open",function(){document.getElementsByClassName("AddNewChild")[0].classList.remove("open"),document.getElementById("NewChild").classList.remove("active")});var C=document.getElementsByClassName("AddNewChild");e(C,"toggle","open",function(){document.getElementById("NewChild").classList.toggle("active")});var T=document.getElementsByClassName("addNewChildSubmit")[0];T.onclick=function(e){e.preventDefault();var a=document.getElementById("NewChildWalletAddress").value,n=document.getElementById("NewChildNickname").value;t(a,n)};var B=document.getElementsByClassName("addTaskForChild");e(B,"toggle","open",function(){document.getElementById("NewTask").classList.toggle("active")});var I=document.getElementsByClassName("cancelTask");e(I,"remove","open",function(){document.getElementById("NewTask").classList.remove("active")});var E=document.getElementsByClassName("AddNewTask");E.length&&(E[0].onclick=function(t){t.preventDefault(),console.log("cloneable!");var e=document.getElementsByClassName("cloneable");if(e.length){var a=e[0].cloneNode(!0);document.getElementById("TaskBlocks").appendChild(a)}})};